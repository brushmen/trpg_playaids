<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="description" content="a Javascript playaid page for Matthijs Holter&#39;s tabletop roleplaying game titled &#39;Archipelago III&#39;">
    <meta name="author" content="brushmen">
<title>Archipelago III Playaid</title>
<style>
body {
    font-size: 62.5%; /* 1em = 10px */
    font-family: Sans-Serif;
}

#setup {
    width: 100%;
}

#leftsidebar {
    width: 400px;
    float: left;
    font-size: 1.5em; /* 15px */
}

#rightsidebar {
    width: 300px;
    float: right;
    font-size: 1.3em;
}

#main {
    width: 800px;
    float: left;
    /*border: 1px navy solid;*/
}

#card {
    margin: 0.5em 0 0 3em;
}
.fate, .resolution {
    width: 600px;
    padding: 1em;
    font-size: 2.5em;
    text-align: center;
}

#fatebutton, #resolutionbutton {
    padding: 1em;
}
#fatebutton, .fate {
    background-color: #bee1f3;
}
#resolutionbutton, .resolution {
    background-color: #fbeeb3;
}

.textbox {
    margin: 5px 0 0 0;
    width: 300px;
    height: 530px;
    font-size: 2em;
}
</style>
<script>
var fate_text = [
    "Somebody important to this character faces trouble because of the element you own - severe illness, bankruptcy, doubt in their faith or similar.",
    "This character does something rash that causes them a lot of trouble with the element you own. An unwise liaison; insulting an ally; destruction of property.",
    "An area on the map is threatened. An attack by enemies, a natural disaster, a change from within or similar.",
    "Someone from this character's past suddenly appears in an area on the map, with a request or demand.",
    "The element you own is interfering with this character's desires, wishes or needs.",
    "Something important is stolen from this character by someone connected to the element you own.",
    "The element you own changes allegiance, motivation or direction.",
    "This character receives an unwanted and troublesome gift from an area on the map.",
    "The element you own claims something from you that you might not be able to give.",
    "This character makes an enemy in the element you own.",
    "This character must come to terms with the element you own, either mastering it, co-opting it, or accepting the element's control.",
    "The element you own comes to this character's aid in some unexpected and surprising way. This is not without consequences."
];

var resolution_text = [
    "YES, and... you earn a friend, reward or good reputation in the process.",
    "YES, and... something completely unrelated is a smashing success.",
    "YES, but... you earn a new enemy, debt or bad reputation in the process.",
    "YES, but... something entirely unrelated goes badly wrong.",
    "YES, but... your success will cause great personal harm.",
    "YES, but... your success has dangerous and unintended consequences.",
    "YES, but... your success will harm a friend, ally or loved one.",
    "YES, but... in order to succeed you must sacrifice something dear to you.",
    "PERHAPS... but this isn't something you can do alone. Help is needed.",
    "PERHAPS... but if you want this done, someone more suited to the task must do it.",
    "NO, but... your failure helps another succeed.",
    "NO, but... you gain insight or knowledge that will be useful in the future.",
    "NO, but... you earn a friend, ally or goodwill in the process.",
    "NO, but... your failure has unexpected positive consequences.",
    "NO, and... something entirely unrelated goes badly wrong.",
    "NO, and... someone or something dear to you is harmed, lost or destroyed."
];

var fates = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11 ];
var resolutions = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15 ];

fates = shuffle(fates);
resolutions = shuffle(resolutions);

// functions //////////////////
function shuffle(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
}

function reshuffleFate() {
    fates = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11 ];
    fates = shuffle(fates);
    updateFateDeck();
}

function reshuffleResolution() {
    resolutions = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15 ];
    resolutions = shuffle(resolutions);
    updateResolutionDeck();
}

function drawFate() {
    var x = document.getElementById("card");
    
    // display card in main area
    x.innerHTML = "<div class='fate'>" + fate_text[fates[0]] + "</div>";

    // remove card from deck
    fates.shift();

    updateFateDeck();
}

function drawResolution() {
    var x = document.getElementById("card");

    // display card in main area
    x.innerHTML = "<div class='resolution'>" + resolution_text[resolutions[0]] + "</div>";

    // remove card from deck
    resolutions.shift();

    updateResolutionDeck();
}

function updateFateDeck() {
    var x = document.getElementById("fatebutton");
    if (fates.length > 0) {
        x.innerHTML = "<a href=\"#\" onclick=\"drawFate()\">FATE</a> (" + fates.length + "/12)";
    }
    else {
        x.innerHTML = "FATE (" + fates.length + "/" + "<a href=\"#\" onclick=\"reshuffleFate()\">12</a>)";
    }
}

function updateResolutionDeck() {
    var x = document.getElementById("resolutionbutton");
    if (resolutions.length > 0) {
        x.innerHTML = "<a href=\"#\" onclick=\"drawResolution()\">RESOLUTION</a> (" + resolutions.length + "/16)";
    }
    else {
        x.innerHTML = "RESOLUTION (" + resolutions.length + "/" + "<a href=\"#\" onclick=\"reshuffleResolution()\">16</a>)";
    }
}
</script>

</head>
<body>
<table width="100%">
<tbody><tr><td width="400" valign="top">
On <b>your turn</b>, you MUST...<br>
* Set the stage: give initial directions to the other players<br>
* Portray your character<br>
* Finish scene when ready<br>
You <i>CAN</i>...<br>
* draw fate (once per session; interpreted by another player)<br>
On <b>anyone's turn</b>, including your own, you <i>CAN</i>...<br>
* Create or play a secondary character<br>
* Describe events and the environment<br>
* Say "Try a different way"<br>
* Say "Help"<br>
* Say "Harder"<br>
* Say "Describe that in detail"<br>
* Say "That might not be quite so easy" (once per turn; draw resolution, interpreted by another player)<br>
* Say "I'd like an interlude after that" (only once per turn, keep it short)<br>
* Veto narration related to elements you own<br>
</td>
<td valign="top">

    <div id="card"><div class="fate">The element you own comes to this character's aid in some unexpected and surprising way. This is not without consequences.</div></div>
<br><br>
<div style="text-align: center">Matthijs Holter's <a href="https://norwegianstyle.wordpress.com/2012/09/20/archipelago-iii/" target="new">Archipelago III</a></div>


</td><td width="300" valign="top">
    <div id="fatebutton"><a href="http://brushmen.com/trpg/archipelago_playaid.htm#" onclick="drawFate()">FATE</a> (5/12)</div>
    <div id="resolutionbutton"><a href="http://brushmen.com/trpg/archipelago_playaid.htm#" onclick="drawResolution()">RESOLUTION</a> (8/16)</div>
    <textarea class="textbox" placeholder="destiny points for each player character"></textarea>
</td></tr>
</tbody></table>
<script>
// begin script ////////////
updateFateDeck();
updateResolutionDeck();
</script>

</body></html>
